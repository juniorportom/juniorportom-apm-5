$(function(){if("undefined"!=typeof AccountDock){var c=$("#billing"),n=c.data("stripe-id"),o=AccountDock.configure({key:"ad_acco_9fef40229188e8c0",customer:n});c.on("click",function(){o.open()})}});
$(function(){function t(){e=$("#npm-search").outerWidth()-$("#site-search-submit").outerWidth(),o.innerHTML=".autocomplete-container, .autocomplete-suggestions, #powered-by-constructor-io { width: "+e+"px !important }"}var e,o=document.createElement("style");document.head.appendChild(o),$(window).resize(t),t(),$.getScript("//cnstrc.com/js/ac.js",function(){$("#site-search").constructorAutocomplete({key:"CD06z4gVeqSXRiDL2ZNK",directResults:!0,maxHeight:400})})});
!function(e,t,n,a,i,o,c){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=t.createElement(n),c=t.getElementsByTagName(n)[0],o.async=1,o.src=a,c.parentNode.insertBefore(o,c)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",$('meta[name="x-npm:ga:id"]').attr("content"),"auto"),ga("require","displayfeatures"),ga("send","pageview"),$(document).ready(function(){$('meta[name="x-npm:ga:user-id"]').each(function(e,t){ga("set","userId",t.getAttribute("content"))}),$(document).on("click",".hiring-widget a",function(e){ga("send","event","Hiring Ads","click",$(this).parent().data("id"))}),$(document).on("click",".ad a",function(e){ga("send","event","Hiring Ads","click",$(this).attr("title"))});try{var e=JSON.parse($('meta[name="x-npm:ga:dimensions"]').attr("content")),t=function(t){var n={},a=$(t).data("promotion-id"),i=$(t).data("promotion-spot");return n[e[i]]=String(a),n};$(".promotion").each(function(e,n){ga("send","event","promotion","viewed",$(n).data("promotion-id"),t(n))}),$(document).on("click",".promotion a",function(e){ga("send","event","promotion","clicked",$(element).data("promotion-id"),t(element))})}catch(e){console.error(e)}$('meta[name="x-npm:ga:event"]').each(function(e,t){var n=["send","event"];try{ga.apply(null,n.concat(JSON.parse(t.getAttribute("content"))))}catch(e){console.error(e)}}),$('nav a[href="/enterprise"]').click(function(e){ga("send","event","npm Enterprise","click")}),$(document).on("click","[data-event-trigger='click']",function(e){ga("send","event",$(this).data("eventName"),"click")}),$('.pane a[href="/enterprise"]').click(function(e){var t=$(this).text();ga("set","dimension4",t),ga("send","event","Enterprise","ctaClick",t)}),$("body").on("click","a, button",function(e){var t=$(e.target).text(),n=$(e.target).data("event-name")||($(e.target).is("header a")?"header":"click");ga("set","dimension4",t),ga("send","event","navigation",n,t)})});
$(function(){var e=$('meta[name="x-stripe-key"]').attr("content");if("undefined"!=typeof StripeCheckout&&e){var n=StripeCheckout.configure({key:e,image:"/static/images/n-64.png",name:"npm, Inc.",billingAddress:!0,token:function(e,n){var t={};Object.keys(e.card).forEach(function(n){t[n]=$(".output-"+n).text(),$(".output-"+n).text(e.card[n])}),$.ajax({method:"POST",json:!0,url:"/settings/api/billing",data:{stripeToken:e.id},headers:{"x-csrf-token":window.crumb}}).then(function(e){Object.keys(e.card).forEach(function(n){$(".output-"+n).text(e.card[n])})},function(e){Object.keys(t).forEach(function(e){$(".output-"+e).text(t[e])}),$(".alert-container .alert").slideUp(function(){$(this).remove()});var n=$('<div class="alert alert-error alert-dismissable"><button class="close" data-dismiss="alert"><i class="fa fa-times"></i></button><div class="media mtn"><div class="media-left"><i class="fa alert-icon fa-exclamation-triangle"></i></div><div class="media-body em-high">There was an error updating your payment information.</div></div></div>').hide();$(".alert-container").append(n),n.slideDown()})}});$(document).on("click",".action-change-payment-info",function(e){e.preventDefault(),n.open({"panel-label":"Update Card"})}),$(window).on("popstate",function(){n.close()}),$(".action-checkout").each(function(){var n=$(this),t=StripeCheckout.configure({key:e,image:"/static/images/n-64.png",billingAddress:!0,name:"npm, Inc.",token:function(e,t){n.find('[name="stripeToken"]').val(e.id),n.find('[name="email"]').val(e.email),n.submit()}});n.is("[data-need-card]")&&(n.is("[data-open-signup]")&&t.open({amount:n.find("[name=amount]").val()}),n.on("submit",function(e){n.find('[name="stripeToken"]').val()||(e.preventDefault(),t.open({amount:n.find("[name=amount]").val()}))})),$(window).on("popstate",function(){t.close()})})}});